{-
  Id: urn:ubideco:stl:5sEWBARVLN53k9Q4vf8JLPgSxcfUgrxfYYWF8B42vL2q#gamma-quebec-talent
  Name: Bitcoin
  Version: 0.1.0
  Description: Consensus library for bitcoin protocol
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

@context
typelib Bitcoin

import Std#55f8bsTvyh7zAeYAiNwL9G1DxgwXzDvE8edcTFJz3Q9H#milan-poncho-gray
  use Bool#laser-madam-maxwell


@mnemonic(politic-cactus-salon)
data Bip340Sig         : sig [Byte ^ 64], sighash_type SighashType?

@mnemonic(canada-sharp-traffic)
data BlockHash         : [Byte ^ 32]

@mnemonic(rose-apropos-join)
data BlockHeader       : version I32
                       , prevBlockHash BlockHash
                       , merkleRoot [Byte ^ 32]
                       , time U32
                       , bits U32
                       , nonce U32

@mnemonic(kinetic-avenue-escort)
data ByteStr           : [Byte ^ ..0xffffffff]

@mnemonic(aspect-citrus-nerve)
data CompressedPk      : [Byte ^ 33]

@mnemonic(nuclear-coral-gilbert)
data ControlBlock      : leafVersion LeafVer
                       , outputKeyParity Parity
                       , internalPk InternalPk
                       , merkleBranch TapMerklePath

@mnemonic(student-formula-circus)
data FutureLeafVer     : U8

@mnemonic(anita-tactic-bikini)
data InternalPk        : XOnlyPk

@mnemonic(anvil-arctic-cloud)
data LeafScript        : version LeafVer, script ScriptBytes

@mnemonic(tunnel-lagoon-cowboy)
data LeafVer           : U8

@mnemonic(student-avenue-economy)
data LegacyPk          : compressed Std.Bool#laser-madam-maxwell, pubkey [Byte ^ 33]

@mnemonic(gondola-middle-style)
data LegacySig         : sig [Byte ^ ..0xff], sighash_type SighashType

@mnemonic(greek-support-hawaii)
data LockHeight        : U32

@mnemonic(tokyo-inch-program)
data LockTime          : U32

@mnemonic(compass-protein-barcode)
data LockTimestamp     : U32

@mnemonic(bless-hippie-shirt)
data OpCode            : pushBytes0 | pushBytes1 | pushBytes2 | pushBytes3
                       | pushBytes4 | pushBytes5 | pushBytes6 | pushBytes7
                       | pushBytes8 | pushBytes9 | pushBytes10 | pushBytes11
                       | pushBytes12 | pushBytes13 | pushBytes14 | pushBytes15
                       | pushBytes16 | pushBytes17 | pushBytes18 | pushBytes19
                       | pushBytes20 | pushBytes21 | pushBytes22 | pushBytes23
                       | pushBytes24 | pushBytes25 | pushBytes26 | pushBytes27
                       | pushBytes28 | pushBytes29 | pushBytes30 | pushBytes31
                       | pushBytes32 | pushData1#76 | pushData2 | pushData4
                       | reserved#80 | pushNum1 | return#106 | dup#118
                       | equal#135 | equalVerify | ripemd160#166 | sha1
                       | sha256 | hash160 | hash256 | checkSig#172
                       | checkSigVerify


@mnemonic(pocket-pegasus-frank)
data Outpoint          : txid Txid, vout Vout

@mnemonic(beach-twist-hotel)
data OutputPk          : XOnlyPk

@mnemonic(method-editor-echo)
data Parity            : even | odd


@mnemonic(soviet-senator-wisdom)
data PubkeyHash        : [Byte ^ 20]

@mnemonic(delta-jumbo-clone)
data RedeemScript      : ScriptBytes

@mnemonic(pyramid-spray-star)
data Sats              : U64

@mnemonic(maestro-source-jackson)
data ScriptBytes       : [Byte ^ ..0xffffffff]

@mnemonic(samuel-miami-cave)
data ScriptHash        : [Byte ^ 20]

@mnemonic(bingo-maestro-silk)
data ScriptPubkey      : ScriptBytes

@mnemonic(rhino-time-rodent)
data SeqNo             : U32

@mnemonic(prelude-analyze-think)
data SigScript         : ScriptBytes

@mnemonic(prefix-pioneer-remark)
data SighashFlag       : all#1 | none | single


@mnemonic(balsa-equator-ground)
data SighashType       : flag SighashFlag, anyoneCanPay Std.Bool#laser-madam-maxwell

@mnemonic(europe-welcome-phone)
data TapBranchHash     : [Byte ^ 32]

@mnemonic(weekend-boris-import)
data TapCode           : pushBytes32#32 | pushData1#76 | pushData2 | pushData4
                       | reserved#80 | return#106


@mnemonic(middle-jazz-basket)
data TapLeafHash       : [Byte ^ 32]

@mnemonic(dublin-chemist-version)
data TapMerklePath     : [TapBranchHash ^ ..0x80]

@mnemonic(crash-culture-jamaica)
data TapNodeHash       : [Byte ^ 32]

@mnemonic(telecom-quest-helium)
data TapScript         : ScriptBytes

@mnemonic(texas-tommy-geneva)
data TimeLockInterval  : height U16
                       | time U16

@mnemonic(milk-gloria-prize)
data Tx                : version TxVer
                       , inputs [TxIn ^ ..0xffffffff]
                       , outputs [TxOut ^ ..0xffffffff]
                       , lockTime LockTime

@mnemonic(antenna-crater-planet)
data TxIn              : prevOutput Outpoint
                       , sigScript SigScript
                       , sequence SeqNo
                       , witness Witness

@mnemonic(design-jacket-spirit)
data TxOut             : value Sats, scriptPubkey ScriptPubkey

@mnemonic(english-natasha-virus)
data TxVer             : I32

@mnemonic(cowboy-diego-betty)
data Txid              : [Byte ^ 32]

@mnemonic(yellow-jaguar-pastel)
data UncompressedPk    : [Byte ^ 65]

@mnemonic(waiter-salad-casino)
data VBytes            : U32

@mnemonic(conan-avalon-food)
data VarInt            : U64

@mnemonic(chrome-robin-gallop)
data Vout              : U32

@mnemonic(plasma-august-marion)
data WPubkeyHash       : [Byte ^ 20]

@mnemonic(vibrate-charm-spain)
data WScriptHash       : [Byte ^ 32]

@mnemonic(bridge-version-voyage)
data WeightUnits       : U32

@mnemonic(sonata-local-slow)
data Witness           : [ByteStr ^ ..0xffffffff]

@mnemonic(scholar-juice-titanic)
data WitnessProgram    : version WitnessVer, program [Byte ^ 2..0x28]

@mnemonic(boris-harbor-equal)
data WitnessScript     : ScriptBytes

@mnemonic(richard-average-unit)
data WitnessVer        : v0 | v1#81 | v2 | v3
                       | v4 | v5 | v6 | v7
                       | v8 | v9 | v10 | v11
                       | v12 | v13 | v14 | v15
                       | v16


@mnemonic(sushi-polygon-circus)
data Wtxid             : [Byte ^ 32]

@mnemonic(evident-finance-promo)
data XOnlyPk           : [Byte ^ 32]


