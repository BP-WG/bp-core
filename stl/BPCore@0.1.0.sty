{-
  Id: stl:ywtQuh4L-rC8_3Lk-99FA5~N-La46hkd-qHFFwE3-XghE5FQ#llama-ohio-lagoon
  Name: BPCore
  Version: 0.1.0
  Description: Bitcoin client-side-validation library
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023-2024 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

@context
typelib BPCore

import Std#delete-roman-hair
  use U5#orbit-graph-sonic

import Bitcoin#signal-color-cipher
  use Vout#brush-gloria-heroic
  use ScriptBytes#equator-cockpit-gong
  use TapNodeHash#paprika-amanda-hunter
  use LeafScript#bison-doctor-oscar
  use Txid#shallow-light-reverse
  use InternalPk#habitat-paprika-oliver
  use LeafVer#benefit-carbon-africa
  use Outpoint#logo-alamo-madam
  use XOnlyPk#clever-swim-carpet

import CommitVerify#uranium-alien-extend
  use Method#subject-justin-cowboy
  use ProtocolId#shadow-eclipse-program
  use Message#druid-blitz-rover
  use MerkleHash#horse-popcorn-bundle
  use MerkleProof#austria-jaguar-donald
  use ReservedBytes1#origin-roger-relax


@mnemonic(pilot-evita-provide)
data AnchorOpretProof  : mmbProof BundleProof
                       , mpcProtocol CommitVerify.ProtocolId
                       , mpcProof CommitVerify.MerkleProof
                       , dbcProof OpretProof
                       , fallbackProof CommitVerify.ReservedBytes1

@mnemonic(liter-sponsor-blitz)
data AnchorTapretProof : mmbProof BundleProof
                       , mpcProtocol CommitVerify.ProtocolId
                       , mpcProof CommitVerify.MerkleProof
                       , dbcProof TapretProof
                       , fallbackProof CommitVerify.ReservedBytes1

@mnemonic(beast-normal-road)
data BundleProof       : map {U32 -> Message}

@mnemonic(druid-blitz-rover)
data Message           : [Byte ^ 32]

@mnemonic(detect-status-goblin)
data MessageMap        : {CommitVerify.ProtocolId -> ^ ..0xffffff MessageSource}

@mnemonic(clone-beach-america)
data MessageSource     : single#1 CommitVerify.Message
                       | mmb BundleProof

@mnemonic(bruce-gravity-titanic)
data Noise             : [Byte ^ 40]

@mnemonic(good-village-flex)
data OpretProof        : ()

@mnemonic(polygon-nixon-guitar)
data Source            : minDepth Std.U5
                       , entropy U64
                       , messages MessageMap

@mnemonic(cabinet-agent-stella)
data TapretNodePartner : leftNode Bitcoin.TapNodeHash
                       | rightLeaf Bitcoin.LeafScript
                       | rightBranch TapretRightBranch

@mnemonic(cotton-ventura-clean)
data TapretPathProof   : partnerNode TapretNodePartner?, nonce U8

@mnemonic(eternal-druid-round)
data TapretProof       : pathProof TapretPathProof, internalPk Bitcoin.InternalPk

@mnemonic(miracle-patriot-touch)
data TapretRightBranch : leftNodeHash Bitcoin.TapNodeHash, rightNodeHash Bitcoin.TapNodeHash

@mnemonic(stamp-morning-tulip)
data TxoSealExt        : noise Noise
                       | fallback Bitcoin.Outpoint

@mnemonic(igloo-viva-orient)
data TxoSealOpretProof : primary Bitcoin.Outpoint, secondary TxoSealExt

@mnemonic(hobby-yogurt-taboo)
data TxoSealTapretProof : primary Bitcoin.Outpoint, secondary TxoSealExt


